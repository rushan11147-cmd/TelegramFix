# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ —Å —ç–Ω–µ—Ä–≥–∏–µ–π –≤ –ø–æ–¥—Ä–∞–±–æ—Ç–∫–∞—Ö

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏", —Ö–æ—Ç—è —ç–Ω–µ—Ä–≥–∏—è –ø–æ–ª–Ω–∞—è (100/100).

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

1. **–î–∞–Ω–Ω—ã–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** - –≤ JavaScript —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏
2. **–≠–Ω–µ—Ä–≥–∏—è –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** - —É —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –ø–æ–ª—è `energy`
3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö** - —ç–Ω–µ—Ä–≥–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞ –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–§–∞–π–ª**: `side_jobs_system.py`
```python
print(f"DEBUG: User {user_id} - Current energy: {current_energy}, Required: {required_energy}")
```

**–§–∞–π–ª**: `app.py`
```python
logger.info(f"Executing side job: user={user_id}, job={job_id}")
logger.info(f"Side job result: success={result.get('success')}, error={result.get('error')}")
```

### 2. –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏
**–§–∞–π–ª**: `side_jobs_system.py`
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –∑–∞–≥—Ä—É–∑–∫–µ —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –†–∞–∑–¥–µ–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `current_energy` –∏ `required_energy`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ Render

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–∫—Ä–æ–π –ª–æ–≥–∏ –Ω–∞ Render –∏ –ø–æ–ø—Ä–æ–±—É–π –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É.

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏:
```
INFO - Executing side job: user=XXX, job=loader
DEBUG: User XXX - Current energy: 100, Required: 15
INFO - Side job result: success=True, error=None
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. –û—Ç–∫—Ä–æ–π –∏–≥—Ä—É
2. –û—Ç–∫—Ä–æ–π –∫–æ–Ω—Å–æ–ª—å (F12)
3. –û—Ç–∫—Ä–æ–π –º–µ–Ω—é –ø–æ–¥—Ä–∞–±–æ—Ç–æ–∫
4. –ü–æ–ø—Ä–æ–±—É–π –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É
5. –ü–æ—Å–º–æ—Ç—Ä–∏ –≤ –∫–æ–Ω—Å–æ–ª—å - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å:
```
POST /api/side-jobs/execute
{
  "user_id": "XXX",
  "job_id": "loader"
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é –≤ –ë–î

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤ –ë–î:
- –ü–æ–ª–µ `energy` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ó–Ω–∞—á–µ–Ω–∏–µ `energy` - —á–∏—Å–ª–æ, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–∞
- –ó–Ω–∞—á–µ–Ω–∏–µ `energy` >= 0

## –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ï—Å–ª–∏ —ç–Ω–µ—Ä–≥–∏—è = 0
**–ü—Ä–æ–±–ª–µ–º–∞**: –≠–Ω–µ—Ä–≥–∏—è –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—é `next_day()` - —Ç–∞–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```python
user['energy'] = user.get('max_energy', 100)
```

### –ï—Å–ª–∏ —ç–Ω–µ—Ä–≥–∏—è = undefined
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ —Å—Ç–∞—Ä—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ—Ç –ø–æ–ª—è `energy`

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ `get_user_data_safe()`:
```python
if 'energy' not in db_data:
    db_data['energy'] = 100
    db_data['max_energy'] = 100
    save_user_data(user_id, db_data)
```

### –ï—Å–ª–∏ —ç–Ω–µ—Ä–≥–∏—è = "100" (—Å—Ç—Ä–æ–∫–∞)
**–ü—Ä–æ–±–ª–µ–º–∞**: –≠–Ω–µ—Ä–≥–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:
```python
current_energy = int(user.get('energy', 0))
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚è≥ –ü–æ–¥–æ–∂–¥–∞—Ç—å –¥–µ–ø–ª–æ–π (~5 –º–∏–Ω—É—Ç)
2. üéÆ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥—Ä–∞–±–æ—Ç–∫—É
3. üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ Render
4. üêõ –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è - —Å–æ–æ–±—â–∏—Ç—å —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ª–æ–≥–∏

---

**–ö–æ–º–º–∏—Ç**: d5d94cd
**–î–∞—Ç–∞**: 29.01.2026
**–°—Ç–∞—Ç—É—Å**: –û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
