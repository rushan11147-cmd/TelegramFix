# ✅ РЕШЕНИЕ ПРОБЛЕМЫ "415 Unsupported Media Type"

## Что я обнаружил

Файл app.py **ПРАВИЛЬНЫЙ** и полный. Проблема не в коде.

Ошибка "415 Unsupported Media Type" возникает потому что:
1. У вас запущено несколько старых процессов Python с Telegram ботом
2. Эти процессы блокируют порт или создают конфликты
3. Flask не может правильно обработать запросы

## РЕШЕНИЕ (ПОШАГОВО)

### Шаг 1: Остановите ВСЕ процессы Python

**Вариант А: Через Диспетчер задач**
1. Нажмите `Ctrl + Shift + Esc`
2. Найдите все процессы `python.exe`
3. Щелкните правой кнопкой → **Завершить задачу**
4. Повторите для ВСЕХ процессов python.exe

**Вариант Б: Через командную строку**
Откройте командную строку от имени администратора и выполните:
```cmd
taskkill /F /IM python.exe
```

### Шаг 2: Закройте все окна командной строки

Закройте ВСЕ окна cmd/PowerShell, которые были открыты.

### Шаг 3: Подождите 10 секунд

Дайте системе время завершить все процессы.

### Шаг 4: Запустите приложение ЗАНОВО

Двойной клик на файл:
```
start_flask_only.bat
```

Или через командную строку:
```bash
python app.py
```

### Шаг 5: Откройте браузер

Перейдите на:
```
http://127.0.0.1:5000
```

---

## Если проблема сохраняется

### Проверка 1: Порт занят?

Выполните:
```cmd
netstat -ano | findstr :5000
```

Если видите процесс, завершите его:
```cmd
taskkill /F /PID [номер_процесса]
```

### Проверка 2: Firewall блокирует?

Временно отключите антивирус/firewall и попробуйте снова.

### Проверка 3: Попробуйте другой порт

Измените в app.py:
```python
port = int(os.environ.get('PORT', 8080))  # Вместо 5000
```

Затем откройте: http://127.0.0.1:8080

---

## Почему возникла проблема

1. **Множественные запуски** - вы запускали приложение несколько раз
2. **Telegram бот конфликтует** - несколько экземпляров бота пытаются работать одновременно
3. **Процессы не завершаются** - Python процессы остаются в памяти

## Как избежать в будущем

1. **Всегда закрывайте** предыдущий запуск перед новым
2. **Используйте start_flask_only.bat** - он запускает только Flask без бота
3. **Проверяйте Диспетчер задач** перед запуском

---

## Быстрое решение (если совсем ничего не помогает)

1. **Перезагрузите компьютер**
2. После перезагрузки запустите `start_flask_only.bat`
3. Откройте http://127.0.0.1:5000

---

## Telegram бот

Если хотите запустить Telegram бота:
1. Сначала убедитесь, что Flask работает
2. Затем используйте `start_with_bot.bat`
3. Или запустите отдельно: `python bot.py`

---

## Итог

**Проблема НЕ в коде!** Код правильный.

**Проблема в запущенных процессах!** Нужно их остановить.

**Решение:** Завершите все python.exe процессы и запустите заново.
